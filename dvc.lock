schema: '2.0'
stages:
  preprocess_data:
    cmd: python src/data/make_dataset.py data/raw/train.csv data/raw/test.csv data/interim/train.pkl
      data/interim/test.pkl data/interim/train_X.pkl data/interim/train_Y.pkl data/interim/val_X.pkl
      data/interim/val_Y.pkl
    deps:
    - path: data/raw
      md5: f1bee252fc1163f4595334fedeb31899.dir
      size: 962294
      nfiles: 4
    outs:
    - path: data/interim
      md5: d7e677ad45d4fd60eb8c8b0362135dbe.dir
      size: 3668706
      nfiles: 17
  tain_val_split:
    cmd: train_test_split -d data/interim --outs-persist data/interim python src/data/train_val_split.py
      data/interim/train.pkl data/interim/train_X.pkl data/interim/train_Y.pkl data/interim/val_X.pkl
      data/interim/val_Y.pkl
  build_features:
    cmd: python src/features/build_features.py data/interim/train_X.pkl data/interim/train_Y.pkl
      data/interim/val_X.pkl data/interim/val_Y.pkl data/processed/x_train_label_encoded.pkl
      data/processed/x_val_label_encoded.pkl data/processed/x_train_target_encoded.pkl
      data/processed/x_val_target_encoded.pkl
    deps:
    - path: data/interim
      md5: d7e677ad45d4fd60eb8c8b0362135dbe.dir
      size: 3668706
      nfiles: 17
    outs:
    - path: data/processed
      md5: ef11a7d6142e4ef69a78d94db20f4e3e.dir
      size: 7531442
      nfiles: 35
  train_val_split:
    cmd: python src/data/train_val_split.py data/interim/train.pkl data/interim/train_X.pkl
      data/interim/train_Y.pkl data/interim/val_X.pkl data/interim/val_Y.pkl
  train_models:
    cmd: python src/models/train_model.py data/interim/train_X.pkl data/interim/train_Y.pkl
      data/processed/x_train_label_encoded.pkl data/processed/x_train_target_encoded.pkl
      models/cat_boost_regressor.pkl models/RFR_label_encode.pkl models/RFR_target_encode.pkl
    deps:
    - path: data/interim
      md5: d7e677ad45d4fd60eb8c8b0362135dbe.dir
      size: 3668706
      nfiles: 17
    - path: data/processed
      md5: ef11a7d6142e4ef69a78d94db20f4e3e.dir
      size: 7531442
      nfiles: 35
    outs:
    - path: models/
      md5: 5e4ba9b02084a0ad23c77f727d678ba4.dir
      size: 99683247
      nfiles: 60
  val_predict_count_metrics:
    cmd: python ./src/models/predict_model.py data/interim/val_X.pkl data/interim/val_Y.pkl
      data/processed/x_val_label_encoded.pkl data/processed/x_val_target_encoded.pkl
      models/cat_boost_regressor.pkl models/RFR_label_encode.pkl models/RFR_target_encode.pkl
      best_model/best_model.pkl
    deps:
    - path: data/interim
      md5: d7e677ad45d4fd60eb8c8b0362135dbe.dir
      size: 3668706
      nfiles: 17
    - path: data/processed
      md5: ef11a7d6142e4ef69a78d94db20f4e3e.dir
      size: 7531442
      nfiles: 35
    - path: models/
      md5: 5e4ba9b02084a0ad23c77f727d678ba4.dir
      size: 99683247
      nfiles: 60
    outs:
    - path: best_model/
      md5: 6730f97d8b6f4d0d25d618d354ed7b14.dir
      size: 1130444
      nfiles: 1
  model_evaluate:
    cmd: python src/evaluate.py data/interim/test.pkl ./data/external/predictions.csv
      best_model/best_model.pkl
    deps:
    - path: best_model/
      md5: 6730f97d8b6f4d0d25d618d354ed7b14.dir
      size: 1130444
      nfiles: 1
    - path: data/interim
      md5: d7e677ad45d4fd60eb8c8b0362135dbe.dir
      size: 3668706
      nfiles: 17
    outs:
    - path: data/external
      md5: 54d80de268ab49461c2d24fb121e2e26.dir
      size: 35926
      nfiles: 2
